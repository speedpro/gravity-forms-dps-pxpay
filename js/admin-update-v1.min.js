// gravity-forms-dps-pxpay
// https://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/

!function(p){function a(){var a=gfdpspxpay_updatev1[n];"end"===a?(p("#gfdpspxpay-upgrade").replaceWith("<strong>Done.</strong>"),p("#gfdpspxpay-updatev1-progress").hide()):(p("#gfdpspxpay-upgrade").text("Processing "+a+"..."),p("#gfdpspxpay-updatev1-progress").show(),p.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:a+"_list"},t))}function t(p){p&&p.success&&(r=p.data.ids,e(0,p.data.step))}function e(a,t){a<r.length&&p.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:t,id:r[a],next:a+1},s)}function s(t){if(t&&t.success){var s=Math.floor(t.data.next/r.length*100)+"%",d=t.data.next;d<r.length?e(d,t.data.step):(s="100%",n++,a()),p("#gfdpspxpay-updatev1-progress > div").css({width:s}).text(s)}else{var g=t.data.error||"ERROR";p("#gfdpspxpay-updatev1-progress > div").css({width:"100%",backgroundColor:"transparent"}).text(g)}}var d=!1,r=[],n=0;p("#gfdpspxpay-upgrade").on("click",function(){d||(d=!0,a())})}(jQuery);