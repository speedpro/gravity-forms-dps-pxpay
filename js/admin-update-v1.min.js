// Gravity Forms DPS PxPay
// https://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/

"use strict";!function(e){var p=!1,d=[],r=0;function g(){var p=gfdpspxpay_updatev1[r];"end"===p?(e("#gfdpspxpay-upgrade").replaceWith("<strong>Done.</strong>"),e("#gfdpspxpay-updatev1-progress").hide()):(e("#gfdpspxpay-upgrade").text("Processing "+p+"..."),e("#gfdpspxpay-updatev1-progress").show(),e.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:p+"_list"},t))}function t(p){p&&p.success&&(d=p.data.ids,n(0,p.data.step))}function n(p,t){p<d.length&&e.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:t,id:d[p],next:p+1},a)}function a(p){if(p&&p.success){var t,a=p.data.next;a<d.length?(t=Math.floor(a/d.length*100)+"%",n(a,p.data.step)):(t="100%",r++,g()),e("#gfdpspxpay-updatev1-progress > div").css({width:t}).text(t)}else{var s=p.data.error||"ERROR";e("#gfdpspxpay-updatev1-progress > div").css({width:"100%",backgroundColor:"transparent"}).text(s)}}e("#gfdpspxpay-upgrade").on("click",function(){p||(p=!0,g())})}(jQuery);