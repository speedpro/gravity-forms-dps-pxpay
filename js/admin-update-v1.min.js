// gravity-forms-dps-pxpay
// https://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/
!function(a){function b(){var b=gfdpspxpay_updatev1[h];"end"===b?(a("#gfdpspxpay-upgrade").replaceWith("<strong>Done.</strong>"),a("#gfdpspxpay-updatev1-progress").hide()):(a("#gfdpspxpay-upgrade").text("Processing "+b+"..."),a("#gfdpspxpay-updatev1-progress").show(),a.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:b+"_list"},c))}function c(a){a&&a.success&&(g=a.data.ids,d(0,a.data.step))}function d(b,c){b<g.length&&a.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:c,id:g[b],next:b+1},e)}function e(c){if(c&&c.success){var e=Math.floor(c.data.next/g.length*100)+"%",f=c.data.next;f<g.length?d(f,c.data.step):(e="100%",h++,b()),a("#gfdpspxpay-updatev1-progress > div").css({width:e}).text(e)}else{var i=c.data.error||"ERROR";a("#gfdpspxpay-updatev1-progress > div").css({width:"100%",backgroundColor:"transparent"}).text(i)}}var f=!1,g=[],h=0;a("#gfdpspxpay-upgrade").on("click",function(){f||(f=!0,b())})}(jQuery);