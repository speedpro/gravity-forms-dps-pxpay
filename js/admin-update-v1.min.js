// gravity-forms-dps-pxpay
// https://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/

!function(p){var a=!1,t=[],e=0;p("#gfdpspxpay-upgrade").on("click",function(){a||(a=!0,s())});function s(){var a=gfdpspxpay_updatev1[e];"end"===a?(p("#gfdpspxpay-upgrade").replaceWith("<strong>Done.</strong>"),p("#gfdpspxpay-updatev1-progress").hide()):(p("#gfdpspxpay-upgrade").text("Processing "+a+"..."),p("#gfdpspxpay-updatev1-progress").show(),p.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:a+"_list"},d))}function d(p){p&&p.success&&(t=p.data.ids,r(0,p.data.step))}function r(a,e){a<t.length&&p.getJSON(ajaxurl,{action:"gfdpspxpay_upgradev1",step:e,id:t[a],next:a+1},n)}function n(a){if(a&&a.success){var d=Math.floor(a.data.next/t.length*100)+"%",n=a.data.next;n<t.length?r(n,a.data.step):(d="100%",e++,s()),p("#gfdpspxpay-updatev1-progress > div").css({width:d}).text(d)}else{var g=a.data.error||"ERROR";p("#gfdpspxpay-updatev1-progress > div").css({width:"100%",backgroundColor:"transparent"}).text(g)}}}(jQuery);